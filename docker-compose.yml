version: "3.9"
services:
  hate-pwn:
    build:
      context: .
    entrypoint: ["/bin/sh","-c"]
    command:
    - |
       printf "const mineflayer = require('mineflayer')\n\nif (process.argv.length < 4 || process.argv.length > 6) {\n  console.log('Usage : node attack.js <host> <port> [<name>] [<password>]')\n  process.exit(1)\n}\n\nhateSpeech=[\n  \"THIS SERVER HAS BEEN COMPROMISED AND I AM AN EVIL CHEAT BOT\",\n]\n\nconst quotes = require('success-motivational-quotes');\nconst { uniqueNamesGenerator, adjectives, colors, animals } = require('unique-names-generator');\nconst name = uniqueNamesGenerator({\n  dictionaries: [adjectives, animals],\n  length: 2\n});\n\nconst { pathfinder, Movements, goals } = require('mineflayer-pathfinder')\nconst {parse, transform, stringify} = require('csv/sync');\nconst rawRecords = parse(hateSpeech);\n\nconst pvp = require('mineflayer-pvp').plugin\nvar entity = null;\n\nfunction createBot () {\n  const bot = mineflayer.createBot({\n    host: process.argv[2],\n    port: parseInt(process.argv[3]),\n    username: process.argv[4] ? process.argv[4] : name,\n    password: process.argv[5]\n  })\n  bot.loadPlugin(pathfinder)\n  bot.loadPlugin(pvp)\n\n  bot.on('error', (err) => console.log(err))\n  bot.on('end', function() {setTimeout(function() { createBot() }, 5000);});\n\n  bot.on('physicsTick', () => {\n    if (Math.floor(Math.random() * 1000) == 0) {\n      try {\n  	randomOne=Math.floor(Math.random() * hateSpeech.length)\n        bot.chat(hateSpeech[randomOne]);\n      } catch(e) {console.log(e) }\n    }\n  });\n}\ncreateBot()" > /tmp/poison.js
       node /tmp/poison.js mc-forge 25565 hate-pwn-bot
  attack-pwn:
    build:
      context: .
    entrypoint: ["/bin/sh","-c"]
    command:
    - |
       printf "const mineflayer = require('mineflayer') \n \nif (process.argv.length < 4 || process.argv.length > 6) { \n  console.log('Usage : node attack.js <host> <port> [<name>] [<password>]') \n  process.exit(1) \n} \nconst quotes = require('success-motivational-quotes'); \nconst { uniqueNamesGenerator, adjectives, colors, animals } = require('unique-names-generator'); \nconst name = uniqueNamesGenerator({ \n  dictionaries: [adjectives, animals], \n  length: 2 \n}); \nconst { pathfinder, Movements, goals } = require('mineflayer-pathfinder') \nconst pvp = require('mineflayer-pvp').plugin \nvar entity = null; \n \nfunction createBot () { \n  const bot = mineflayer.createBot({ \n    host: process.argv[2], \n    port: parseInt(process.argv[3]), \n    username: process.argv[4] ? process.argv[4] : name, \n    password: process.argv[5] \n  }) \n  bot.loadPlugin(pathfinder) \n  bot.loadPlugin(pvp) \n \n  bot.on('error', (err) => console.log(err)) \n  bot.on('end', function() {setTimeout(function() { createBot() }, 5000);}); \n \n  bot.on('spawn', () => { \n    bot.on('chat', (username, message) => { \n      if (message.match(/oldemort/)) { \n        bot.chat(`REPORT: Voldomort, please don't say You-Know-Who!`); \n      } \n   }); \n  }); \n \n  bot.on('entityHurt', (hurtEntity) => { \n    if (hurtEntity == bot.entity) { \n      // someone hurt me. It might be someone closer than my target \n      const filter = e => e.type === 'mob' && e.position.distanceTo(bot.entity.position) < 32 && e.mobType !== 'Armor Stand' // Mojang classifies armor stands as mobs for some reason? \n      entity = bot.nearestEntity(filter) \n      if (entity) { \n        bot.pvp.attack(entity) \n      } \n    } \n  }); \n \n  bot.on('entityGone', (goneEntity) => { \n    if (entity != null && goneEntity == entity) { \n      entity = null; \n    } \n  }); \n \n   \n \n  bot.on('physicsTick', () => { \n    if (Math.floor(Math.random() * 3000) == 0) { \n      try { \n        bot.chat(quotes.getTodaysQuote()['body']); \n      } catch(e) {console.log(e) } \n    } \n    // stay on target \n    if (entity) { \n      return; \n    } \n \n    const filter = e => e.position.distanceTo(bot.entity.position) < 16 && e.mobType !== 'Armor Stand' // Mojang classifies armor stands as mobs for some reason? \n \n    entity = bot.nearestEntity(filter) \n    if (entity) { \n      bot.pvp.attack(entity) \n    } \n}) \n \n   \n  function attackPlayer (username) { \n    const player = bot.players[username] \n    if (!player || !player.entity) { \n      bot.chat('I can\'t see you') \n    } else { \n      bot.chat(`Attacking Hacking`) \n      bot.attack(player.entity) \n    } \n  } \n   \n  function attackEntity () { \n    const entity = bot.nearestEntity() \n    if (!entity) { \n      bot.chat('No nearby entities') \n    } else { \n      bot.chat(`Attacking USER`) \n      bot.attack(entity) \n    } \n  } \n} \ncreateBot()" > /tmp/poison.js
       node /tmp/poison.js mc-forge 25565 voldomort

networks:
    default:
        external:
            name: minecraft_default
